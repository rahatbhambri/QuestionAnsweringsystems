<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Searchy
    </title>
    <script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

</head>
<body>

<div id="app">
    <h1 id="phead">Searchy<img id ="searchy" src="{{ url_for('static', filename='fish.gif') }}">    
    </h1>
    <div >
        <form @submit.prevent>
            <input id="question" v-model="question" placeholder="Ask me anything">
            <button type="submit" @click="getAnswer()"> Ask a question </button>
        </form>
    </div>
    <br>
    <div v-if="answer_received">
        <img :src="img" id="curr_img">
        <p><strong>Answer : </strong>[[ this.answer ]]</p>
    </div>
</div>
<style>
    #searchy {
        width : 1in ;
        height : 1in ;
        display: inline; 
        vertical-align: middle; 
    }

    #app {
        margin: 0 auto;
        width: 300px;
        height: 500px;
        background-color: aqua;
        border: 0.1in solid darkblue; 
        flex-flow: row wrap;
        overflow: auto; 
    }
    #phead {
        background-color: blue ;
        color : white ;
        border: 0.05in solid white; 

    }
    #curr_img {
        width : 300px ;
        height : 300px ;
    }
    hr {
        border: 2px solid darkblue;
    }
</style>    

    
<script>
    new Vue({
        el: '#app',
        delimiters: ['[[', ']]'],
        data: {
            question : null,
            answer_received : false,
            answer : null,
            img : null

        },
        methods: {
            async getAnswer(){
                //console.log('Server response:'.data);
                this.answer_received = false
                const data = {"question": this.question}
                const response = await axios.get('/answer', {
                    params: data
                });               
                this.answer_received = true ;
                this.answer = response.data['answer'] ;
                this.img = response.data['img']
                console.log('Server response:', response.data);
                console.log('Question submitted:', this.question);
            }
        }
    });
</script>



</body>
</html>


